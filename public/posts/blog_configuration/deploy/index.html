<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>将博客部署到阿里云服务器 | Jagger's Blog</title>
<meta name=keywords content="BLOG"><meta name=description content="之前搭建hexo博客，是将其部署到github中，通过github.io来访问，但是速度感人，所以本次尝试将hugo博客部署到阿里云服务器，通过域名进行访问，本文参考了hugo博客部署到腾讯云轻量级服务器。 由于是我第一次使用nginx，所以如果遇到什么问题，请多海涵并且可以参考其他博客或网络资料。
在部署之前，我已经有了阿里云服务器（配置为2核2GB）、域国外平台购买的域名（staryh.top）。
1. 服务器端下载并安装nginx 1.1 安装nginx 在ubuntu环境下： 安装nginx
1 sudo apt install nginx 将nginx设置为开机启动：
1 sudo systemctl enable nginx 启动nginx：
1 sudo systemctl start nginx 1.2 测试nginx 查看nginx状态
1 sudo systemctl status nginx 如果没问题，则会出现：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ● nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-07-26 21:46:50 CST; 1 day 13h ago Docs: man:nginx(8) Process: 164834 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 164836 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 164837 (nginx) Tasks: 3 (limit: 1947) Memory: 4."><meta name=author content="Jagger"><link rel=canonical href=https://fireflyyh.top/posts/blog_configuration/deploy/><link crossorigin=anonymous href=/assets/css/stylesheet.1212f0454c490726d67933de27a90315a6177ba895fb506fe0f2bd6e93b66acd.css integrity="sha256-EhLwRUxJBybWeTPeJ6kDFaYXe6iV+1Bv4PK9bpO2as0=" rel="preload stylesheet" as=style><link rel=icon href=https://fireflyyh.top/img/yuan.jpg><link rel=icon type=image/png sizes=16x16 href=https://fireflyyh.top/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://fireflyyh.top/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://fireflyyh.top/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://fireflyyh.top/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://fireflyyh.top/posts/blog_configuration/deploy/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?87f1888ba5320e03987ecde7525fde2d",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y30PKHXBN4"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y30PKHXBN4")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y30PKHXBN4"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y30PKHXBN4")</script>--><meta property="og:title" content="将博客部署到阿里云服务器">
<meta property="og:description" content="之前搭建hexo博客，是将其部署到github中，通过github.io来访问，但是速度感人，所以本次尝试将hugo博客部署到阿里云服务器，通过域名进行访问，本文参考了hugo博客部署到腾讯云轻量级服务器。 由于是我第一次使用nginx，所以如果遇到什么问题，请多海涵并且可以参考其他博客或网络资料。
在部署之前，我已经有了阿里云服务器（配置为2核2GB）、域国外平台购买的域名（staryh.top）。
1. 服务器端下载并安装nginx 1.1 安装nginx 在ubuntu环境下： 安装nginx
1 sudo apt install nginx 将nginx设置为开机启动：
1 sudo systemctl enable nginx 启动nginx：
1 sudo systemctl start nginx 1.2 测试nginx 查看nginx状态
1 sudo systemctl status nginx 如果没问题，则会出现：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ● nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-07-26 21:46:50 CST; 1 day 13h ago Docs: man:nginx(8) Process: 164834 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 164836 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 164837 (nginx) Tasks: 3 (limit: 1947) Memory: 4."><meta property="og:type" content="article"><meta property="og:url" content="https://fireflyyh.top/posts/blog_configuration/deploy/"><meta property="og:image" content="https://fireflyyh.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-28T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-28T00:00:00+00:00"><meta property="og:site_name" content="Jagger's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fireflyyh.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="将博客部署到阿里云服务器"><meta name=twitter:description content="之前搭建hexo博客，是将其部署到github中，通过github.io来访问，但是速度感人，所以本次尝试将hugo博客部署到阿里云服务器，通过域名进行访问，本文参考了hugo博客部署到腾讯云轻量级服务器。 由于是我第一次使用nginx，所以如果遇到什么问题，请多海涵并且可以参考其他博客或网络资料。
在部署之前，我已经有了阿里云服务器（配置为2核2GB）、域国外平台购买的域名（staryh.top）。
1. 服务器端下载并安装nginx 1.1 安装nginx 在ubuntu环境下： 安装nginx
1 sudo apt install nginx 将nginx设置为开机启动：
1 sudo systemctl enable nginx 启动nginx：
1 sudo systemctl start nginx 1.2 测试nginx 查看nginx状态
1 sudo systemctl status nginx 如果没问题，则会出现：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ● nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-07-26 21:46:50 CST; 1 day 13h ago Docs: man:nginx(8) Process: 164834 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 164836 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 164837 (nginx) Tasks: 3 (limit: 1947) Memory: 4."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://fireflyyh.top/posts/"},{"@type":"ListItem","position":2,"name":"将博客部署到阿里云服务器","item":"https://fireflyyh.top/posts/blog_configuration/deploy/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"将博客部署到阿里云服务器","name":"将博客部署到阿里云服务器","description":"之前搭建hexo博客，是将其部署到github中，通过github.io来访问，但是速度感人，所以本次尝试将hugo博客部署到阿里云服务器，通过域名进行访问，本文参考了hugo博客部署到腾讯云轻量级服务器。 由于是我第一次使用nginx，所以如果遇到什么问题，请多海涵并且可以参考其他博客或网络资料。\n在部署之前，我已经有了阿里云服务器（配置为2核2GB）、域国外平台购买的域名（staryh.top）。\n1. 服务器端下载并安装nginx 1.1 安装nginx 在ubuntu环境下： 安装nginx\n1 sudo apt install nginx 将nginx设置为开机启动：\n1 sudo systemctl enable nginx 启动nginx：\n1 sudo systemctl start nginx 1.2 测试nginx 查看nginx状态\n1 sudo systemctl status nginx 如果没问题，则会出现：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ● nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-07-26 21:46:50 CST; 1 day 13h ago Docs: man:nginx(8) Process: 164834 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 164836 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 164837 (nginx) Tasks: 3 (limit: 1947) Memory: 4.","keywords":["BLOG"],"articleBody":"之前搭建hexo博客，是将其部署到github中，通过github.io来访问，但是速度感人，所以本次尝试将hugo博客部署到阿里云服务器，通过域名进行访问，本文参考了hugo博客部署到腾讯云轻量级服务器。 由于是我第一次使用nginx，所以如果遇到什么问题，请多海涵并且可以参考其他博客或网络资料。\n在部署之前，我已经有了阿里云服务器（配置为2核2GB）、域国外平台购买的域名（staryh.top）。\n1. 服务器端下载并安装nginx 1.1 安装nginx 在ubuntu环境下： 安装nginx\n1 sudo apt install nginx 将nginx设置为开机启动：\n1 sudo systemctl enable nginx 启动nginx：\n1 sudo systemctl start nginx 1.2 测试nginx 查看nginx状态\n1 sudo systemctl status nginx 如果没问题，则会出现：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ● nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-07-26 21:46:50 CST; 1 day 13h ago Docs: man:nginx(8) Process: 164834 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 164836 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 164837 (nginx) Tasks: 3 (limit: 1947) Memory: 4.1M CPU: 26ms CGroup: /system.slice/nginx.service ├─164837 \"nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\" ├─164838 \"nginx: worker process\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" └─164839 \"nginx: worker process\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" Jul 26 21:46:50 Firefly-Aliyun systemd[1]: Starting A high performance web server and a reverse proxy server... Jul 26 21:46:50 Firefly-Aliyun systemd[1]: Started A high performance web server and a reverse proxy server. 通过阿里云服务器管理面板中的安全组标签，将服务器的80端口开放。接下来访问http://\u003c服务器IP地址\u003e，如果出现了nginx页面，则代表着配置成功。\n2. 配置nginx 进入/etc/nginx/，目录树如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 . ├── conf.d ├── fastcgi.conf ├── fastcgi_params ├── koi-utf ├── koi-win ├── mime.types ├── modules-available ├── modules-enabled │ ├── 50-mod-http-geoip2.conf -\u003e /usr/share/nginx/modules-available/mod-http-geoip2.conf │ ├── 50-mod-http-image-filter.conf -\u003e /usr/share/nginx/modules-available/mod-http-image-filter.conf │ ├── 50-mod-http-xslt-filter.conf -\u003e /usr/share/nginx/modules-available/mod-http-xslt-filter.conf │ ├── 50-mod-mail.conf -\u003e /usr/share/nginx/modules-available/mod-mail.conf │ ├── 50-mod-stream.conf -\u003e /usr/share/nginx/modules-available/mod-stream.conf │ └── 70-mod-stream-geoip2.conf -\u003e /usr/share/nginx/modules-available/mod-stream-geoip2.conf ├── nginx.conf ├── proxy_params ├── scgi_params ├── sites-available │ └── default ├── sites-enabled │ └── default -\u003e /etc/nginx/sites-available/default ├── snippets │ ├── fastcgi-php.conf │ └── snakeoil.conf ├── uwsgi_params └── win-utf 根据参考博客，要在nginx.conf文件中编辑Server字段，但是在我的这个文件中，并没有出现该字段。经过查阅资料，可以在./sites-available/default当中编辑。\n当没有SSL证书时：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 server { listen 80 default_server; listen [::]:80 default_server; # 修改页面所在目录 root /home/firefly/Codes/blog/public; # Add index.php to the list if you are using PHP index index.html index.htm index.nginx-debian.html; # 修改域名 server_name www.staryh.top; # 修改 location / { # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. root /home/firefly/Codes/blog/public; index index.html index.htm; # try_files $uri $uri/ =404; } error_page 404 /404.html; location = /404.html { root /home/firefly/Codes/blog/public; } } 经过上述修改之后，输入服务器IP地址，就可以访问了\n3. 将域名绑定到服务器 需要域名备案，否则访问不了\n在namecheap上面购买的域名，然后通过cloudflare来对域名解析进行管理。这一步比较简单，参考了域名注册和解析\n4. 实现本机和服务器的public文件夹同步 在这一部分，我的想法比较复杂。\n将本地的博客文件夹放到github中，方便更多人能够访问我的博客所有的文件。 考虑到github的访问速度，打算在gitee中建立一个镜像的仓库，以实现github和gitee的博客文件夹的同步。 这样服务器只需要pull gitee 仓库中的public子文件夹，便可以得到本地主机push到github仓库中的public文件夹。 4.1 本地-\u003egithub 将本地博客文件夹push到github仓库中\n4.2 github-\u003egitee 在gitee上绑定github账号； 在gitee中创建同名仓库，在仓库的管理标签页，选择仓库镜像管理，添加镜像，选择镜像方向为pull gitee \u003c- github，选择正确的镜像仓库，并添加私人令牌，私人令牌在github界面-\u003e用户头像-\u003esettings-\u003edeveloper settings-\u003epersonal access tokens中获取，勾选自动同步。 这样每次本地编辑完并上传github之后，稍等片刻就能在gitee看到修改了😊 截止到写本篇博客时，gitee的仓库镜像管理功能一直存在，且可以自动同步。如果该自动同步功能不见了，可以尝试一篇教你代码同步 Github 和 Gitee中的做法。\n4.3 gitee-\u003e服务器 进入到修改页面所在目录的父目录/home/firefly/Codes/blog，删除原来通过xtfp传输来的public文件夹；\n在本地仓库启用sparseCheckout\n1 git config core.sparseCheckout true 打开./.git/info，然后编辑其中的sparseCheckout文件（如果没有可以新建），将需要指定pull的文件夹位置输入进去：/public；\n回到blog目录，添加远程仓库，并pull（在pull的时候遇到了公私钥导致无法访问的问题，具体解决参考了解决 “fatal: Could not read from remote repository.“）。\n1 git remote add origin git@gitee.com:yourname/yourrepo.git 5. SSL证书 5.1 获得SSL证书 由于阿里云策略改变，目前免费的只有个人测试证书（原免费证书）。\n根据Nginx或Tengine服务器配置SSL证书来进行配置。 其中，将下载的证书相关文件解压缩到/etc/nginx/中，\n5.3 修改nginx配置 同样地，在default文件中，结合了本文提到的两个博客，增加以下内容：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 server { listen 443 ssl; server_name www.fireflyyh.top; root /home/firefly/Codes/blog/public; ssl_certificate /etc/nginx/fireflyyh.top.pem; ssl_certificate_key /etc/nginx/fireflyyh.top.key; ssl_session_cache shared:SSL:1m; ssl_session_timeout 5m; #自定义设置使用的TLS协议的类型以及加密套件（以下为配置示例，请您自行评估是否需要配置） #TLS协议版本越高，HTTPS通信的安全性越高，但是相较于低版本TLS协议，高版本TLS协议对浏览器的兼容性较差。 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3; #表示优先使用服务端加密套件。默认开启 ssl_prefer_server_ciphers on; error_page 404 /404.html; location = /404.html { root /home/firefly/Codes/blog/public; } } ","wordCount":"571","inLanguage":"en","image":"https://fireflyyh.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-07-28T00:00:00Z","dateModified":"2024-07-28T00:00:00Z","author":{"@type":"Person","name":"Jagger"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://fireflyyh.top/posts/blog_configuration/deploy/"},"publisher":{"@type":"Organization","name":"Jagger's Blog","logo":{"@type":"ImageObject","url":"https://fireflyyh.top/img/yuan.jpg"}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y30PKHXBN4"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y30PKHXBN4")</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://fireflyyh.top/ accesskey=h title="Jagger's Blog (Alt + H)"><img src=https://fireflyyh.top/img/laugh.jpg alt aria-label=logo height=35>Jagger's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://fireflyyh.top/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://fireflyyh.top/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://fireflyyh.top/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://fireflyyh.top/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://fireflyyh.top/about/ title=About><span>About</span></a></li><li><a href=https://github.com/starsYHyh/Jagger/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://fireflyyh.top/>Home</a>&nbsp;»&nbsp;<a href=https://fireflyyh.top/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">将博客部署到阿里云服务器</h1><div class=post-meta><span title='2024-07-28 00:00:00 +0000 UTC'>July 28, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;571 words&nbsp;·&nbsp;Jagger&nbsp;|&nbsp;<a href=https://github.com/starsYHyh/Jagger/tree/main/content/posts/blog_configuration/deploy.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1-%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af%e4%b8%8b%e8%bd%bd%e5%b9%b6%e5%ae%89%e8%a3%85nginx aria-label="1. 服务器端下载并安装nginx">1. 服务器端下载并安装nginx</a><ul><li><a href=#11-%e5%ae%89%e8%a3%85nginx aria-label="1.1 安装nginx">1.1 安装nginx</a></li><li><a href=#12-%e6%b5%8b%e8%af%95nginx aria-label="1.2 测试nginx">1.2 测试nginx</a></li></ul></li><li><a href=#2-%e9%85%8d%e7%bd%aenginx aria-label="2. 配置nginx">2. 配置nginx</a></li><li><a href=#3-%e5%b0%86%e5%9f%9f%e5%90%8d%e7%bb%91%e5%ae%9a%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label="3. 将域名绑定到服务器">3. 将域名绑定到服务器</a></li><li><a href=#4-%e5%ae%9e%e7%8e%b0%e6%9c%ac%e6%9c%ba%e5%92%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%9a%84public%e6%96%87%e4%bb%b6%e5%a4%b9%e5%90%8c%e6%ad%a5 aria-label="4. 实现本机和服务器的public文件夹同步">4. 实现本机和服务器的public文件夹同步</a><ul><li><a href=#41-%e6%9c%ac%e5%9c%b0-github aria-label="4.1 本地-&amp;gt;github">4.1 本地->github</a></li><li><a href=#42-github-gitee aria-label="4.2 github-&amp;gt;gitee">4.2 github->gitee</a></li><li><a href=#43-gitee-%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label="4.3 gitee-&amp;gt;服务器">4.3 gitee->服务器</a></li></ul></li><li><a href=#5-ssl%e8%af%81%e4%b9%a6 aria-label="5. SSL证书">5. SSL证书</a><ul><li><a href=#51-%e8%8e%b7%e5%be%97ssl%e8%af%81%e4%b9%a6 aria-label="5.1 获得SSL证书">5.1 获得SSL证书</a></li><li><a href=#53-%e4%bf%ae%e6%94%b9nginx%e9%85%8d%e7%bd%ae aria-label="5.3 修改nginx配置">5.3 修改nginx配置</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>之前搭建hexo博客，是将其部署到github中，通过github.io来访问，但是速度感人，所以本次尝试将hugo博客部署到阿里云服务器，通过域名进行访问，本文参考了<a href=https://www.sulvblog.cn/posts/blog/hugo_deploy/>hugo博客部署到腾讯云轻量级服务器</a>。
由于是我第一次使用nginx，所以如果遇到什么问题，请多海涵并且可以参考其他博客或网络资料。</p><p>在部署之前，我已经有了阿里云服务器（配置为2核2GB）、域国外平台购买的域名（staryh.top）。</p><h2 id=1-服务器端下载并安装nginx>1. 服务器端下载并安装nginx<a hidden class=anchor aria-hidden=true href=#1-服务器端下载并安装nginx>#</a></h2><h3 id=11-安装nginx>1.1 安装nginx<a hidden class=anchor aria-hidden=true href=#11-安装nginx>#</a></h3><p>在ubuntu环境下：
安装nginx</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install nginx
</span></span></code></pre></td></tr></table></div></div><p>将nginx设置为开机启动：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> nginx
</span></span></code></pre></td></tr></table></div></div><p>启动nginx：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl start nginx
</span></span></code></pre></td></tr></table></div></div><h3 id=12-测试nginx>1.2 测试nginx<a hidden class=anchor aria-hidden=true href=#12-测试nginx>#</a></h3><p>查看nginx状态</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl status nginx
</span></span></code></pre></td></tr></table></div></div><p>如果没问题，则会出现：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>● nginx.service - A high performance web server and a reverse proxy server
</span></span><span class=line><span class=cl>     Loaded: loaded <span class=o>(</span>/lib/systemd/system/nginx.service<span class=p>;</span> enabled<span class=p>;</span> vendor preset: enabled<span class=o>)</span>
</span></span><span class=line><span class=cl>     Active: active <span class=o>(</span>running<span class=o>)</span> since Fri 2024-07-26 21:46:50 CST<span class=p>;</span> <span class=m>1</span> day 13h ago
</span></span><span class=line><span class=cl>       Docs: man:nginx<span class=o>(</span>8<span class=o>)</span>
</span></span><span class=line><span class=cl>    Process: <span class=m>164834</span> <span class=nv>ExecStartPre</span><span class=o>=</span>/usr/sbin/nginx -t -q -g daemon on<span class=p>;</span> master_process on<span class=p>;</span> <span class=o>(</span><span class=nv>code</span><span class=o>=</span>exited, <span class=nv>status</span><span class=o>=</span>0/SUCCESS<span class=o>)</span>
</span></span><span class=line><span class=cl>    Process: <span class=m>164836</span> <span class=nv>ExecStart</span><span class=o>=</span>/usr/sbin/nginx -g daemon on<span class=p>;</span> master_process on<span class=p>;</span> <span class=o>(</span><span class=nv>code</span><span class=o>=</span>exited, <span class=nv>status</span><span class=o>=</span>0/SUCCESS<span class=o>)</span>
</span></span><span class=line><span class=cl>   Main PID: <span class=m>164837</span> <span class=o>(</span>nginx<span class=o>)</span>
</span></span><span class=line><span class=cl>      Tasks: <span class=m>3</span> <span class=o>(</span>limit: 1947<span class=o>)</span>
</span></span><span class=line><span class=cl>     Memory: 4.1M
</span></span><span class=line><span class=cl>        CPU: 26ms
</span></span><span class=line><span class=cl>     CGroup: /system.slice/nginx.service
</span></span><span class=line><span class=cl>             ├─164837 <span class=s2>&#34;nginx: master process /usr/sbin/nginx -g daemon on; master_process on;&#34;</span>
</span></span><span class=line><span class=cl>             ├─164838 <span class=s2>&#34;nginx: worker process&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>             └─164839 <span class=s2>&#34;nginx: worker process&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Jul <span class=m>26</span> 21:46:50 Firefly-Aliyun systemd<span class=o>[</span>1<span class=o>]</span>: Starting A high performance web server and a reverse proxy server...
</span></span><span class=line><span class=cl>Jul <span class=m>26</span> 21:46:50 Firefly-Aliyun systemd<span class=o>[</span>1<span class=o>]</span>: Started A high performance web server and a reverse proxy server.
</span></span></code></pre></td></tr></table></div></div><p>通过阿里云服务器管理面板中的安全组标签，将服务器的80端口开放。接下来访问<code>http://&lt;服务器IP地址></code>，如果出现了nginx页面，则代表着配置成功。</p><h2 id=2-配置nginx>2. 配置nginx<a hidden class=anchor aria-hidden=true href=#2-配置nginx>#</a></h2><p>进入<code>/etc/nginx/</code>，目录树如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── conf.d
</span></span><span class=line><span class=cl>├── fastcgi.conf
</span></span><span class=line><span class=cl>├── fastcgi_params
</span></span><span class=line><span class=cl>├── koi-utf
</span></span><span class=line><span class=cl>├── koi-win
</span></span><span class=line><span class=cl>├── mime.types
</span></span><span class=line><span class=cl>├── modules-available
</span></span><span class=line><span class=cl>├── modules-enabled
</span></span><span class=line><span class=cl>│   ├── 50-mod-http-geoip2.conf -&gt; /usr/share/nginx/modules-available/mod-http-geoip2.conf
</span></span><span class=line><span class=cl>│   ├── 50-mod-http-image-filter.conf -&gt; /usr/share/nginx/modules-available/mod-http-image-filter.conf
</span></span><span class=line><span class=cl>│   ├── 50-mod-http-xslt-filter.conf -&gt; /usr/share/nginx/modules-available/mod-http-xslt-filter.conf
</span></span><span class=line><span class=cl>│   ├── 50-mod-mail.conf -&gt; /usr/share/nginx/modules-available/mod-mail.conf
</span></span><span class=line><span class=cl>│   ├── 50-mod-stream.conf -&gt; /usr/share/nginx/modules-available/mod-stream.conf
</span></span><span class=line><span class=cl>│   └── 70-mod-stream-geoip2.conf -&gt; /usr/share/nginx/modules-available/mod-stream-geoip2.conf
</span></span><span class=line><span class=cl>├── nginx.conf
</span></span><span class=line><span class=cl>├── proxy_params
</span></span><span class=line><span class=cl>├── scgi_params
</span></span><span class=line><span class=cl>├── sites-available
</span></span><span class=line><span class=cl>│   └── default
</span></span><span class=line><span class=cl>├── sites-enabled
</span></span><span class=line><span class=cl>│   └── default -&gt; /etc/nginx/sites-available/default
</span></span><span class=line><span class=cl>├── snippets
</span></span><span class=line><span class=cl>│   ├── fastcgi-php.conf
</span></span><span class=line><span class=cl>│   └── snakeoil.conf
</span></span><span class=line><span class=cl>├── uwsgi_params
</span></span><span class=line><span class=cl>└── win-utf
</span></span></code></pre></td></tr></table></div></div><p>根据参考博客，要在<code>nginx.conf</code>文件中编辑<code>Server</code>字段，但是在我的这个文件中，并没有出现该字段。经过查阅资料，可以在<code>./sites-available/default</code>当中编辑。</p><p>当没有SSL证书时：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>server {
</span></span><span class=line><span class=cl>        listen 80 default_server;
</span></span><span class=line><span class=cl>        listen [::]:80 default_server;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        # 修改页面所在目录
</span></span><span class=line><span class=cl>        root /home/firefly/Codes/blog/public;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        # Add index.php to the list if you are using PHP
</span></span><span class=line><span class=cl>        index index.html index.htm index.nginx-debian.html;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        # 修改域名
</span></span><span class=line><span class=cl>        server_name www.staryh.top;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        # 修改
</span></span><span class=line><span class=cl>        location / {
</span></span><span class=line><span class=cl>                # First attempt to serve request as file, then
</span></span><span class=line><span class=cl>                # as directory, then fall back to displaying a 404.
</span></span><span class=line><span class=cl>                root /home/firefly/Codes/blog/public;
</span></span><span class=line><span class=cl>                index index.html index.htm;
</span></span><span class=line><span class=cl>                # try_files $uri $uri/ =404;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        error_page 404 /404.html;
</span></span><span class=line><span class=cl>        location = /404.html {
</span></span><span class=line><span class=cl>                root /home/firefly/Codes/blog/public;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>经过上述修改之后，输入服务器IP地址，就可以访问了</p><h2 id=3-将域名绑定到服务器>3. 将域名绑定到服务器<a hidden class=anchor aria-hidden=true href=#3-将域名绑定到服务器>#</a></h2><p><strong>需要域名备案，否则访问不了</strong></p><p>在namecheap上面购买的域名，然后通过cloudflare来对域名解析进行管理。这一步比较简单，参考了<a href=https://xn--5hq58jg23b.com/%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C%E5%92%8C%E8%A7%A3%E6%9E%90/>域名注册和解析</a></p><h2 id=4-实现本机和服务器的public文件夹同步>4. 实现本机和服务器的public文件夹同步<a hidden class=anchor aria-hidden=true href=#4-实现本机和服务器的public文件夹同步>#</a></h2><p>在这一部分，我的想法比较复杂。</p><ol><li>将本地的博客文件夹放到github中，方便更多人能够访问我的博客所有的文件。</li><li>考虑到github的访问速度，打算在gitee中建立一个镜像的仓库，以实现github和gitee的博客文件夹的同步。</li><li>这样服务器只需要pull gitee 仓库中的public子文件夹，便可以得到本地主机push到github仓库中的public文件夹。</li></ol><h3 id=41-本地-github>4.1 本地->github<a hidden class=anchor aria-hidden=true href=#41-本地-github>#</a></h3><p>将本地博客文件夹push到<a href=https://github.com/starsYHyh/Jagger>github仓库</a>中</p><h3 id=42-github-gitee>4.2 github->gitee<a hidden class=anchor aria-hidden=true href=#42-github-gitee>#</a></h3><ol><li>在gitee上绑定github账号；</li><li>在gitee中创建<a href=https://gitee.com/starsyhyh/Jagger>同名仓库</a>，在仓库的<code>管理</code>标签页，选择<code>仓库镜像管理</code>，添加镜像，选择镜像方向为<code>pull gitee &lt;- github</code>，选择正确的镜像仓库，并添加私人令牌，私人令牌在<code>github界面->用户头像->settings->developer settings->personal access tokens</code>中获取，勾选自动同步。
这样每次本地编辑完并上传github之后，稍等片刻就能在gitee看到修改了😊</li></ol><blockquote><p>截止到写本篇博客时，gitee的仓库镜像管理功能一直存在，且可以自动同步。如果该自动同步功能不见了，可以尝试<a href=https://github.com/mqyqingfeng/Blog/issues/236>一篇教你代码同步 Github 和 Gitee</a>中的做法。</p></blockquote><h3 id=43-gitee-服务器>4.3 gitee->服务器<a hidden class=anchor aria-hidden=true href=#43-gitee-服务器>#</a></h3><ol><li><p>进入到修改页面所在目录的父目录<code>/home/firefly/Codes/blog</code>，删除原来通过xtfp传输来的public文件夹；</p></li><li><p>在本地仓库启用<code>sparseCheckout</code></p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config core.sparseCheckout <span class=nb>true</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li><p>打开<code>./.git/info</code>，然后编辑其中的<code>sparseCheckout</code>文件（如果没有可以新建），将需要指定pull的文件夹位置输入进去：<code>/public</code>；</p></li><li><p>回到blog目录，添加远程仓库，并pull（在pull的时候遇到了公私钥导致无法访问的问题，具体解决参考了<a href=https://blog.csdn.net/weixin_40922744/article/details/107576748>解决 “fatal: Could not read from remote repository.“</a>）。</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git remote add origin git@gitee.com:yourname/yourrepo.git 
</span></span></code></pre></td></tr></table></div></div><h2 id=5-ssl证书>5. SSL证书<a hidden class=anchor aria-hidden=true href=#5-ssl证书>#</a></h2><h3 id=51-获得ssl证书>5.1 获得SSL证书<a hidden class=anchor aria-hidden=true href=#51-获得ssl证书>#</a></h3><p>由于<a href="https://help.aliyun.com/zh/ssl-certificate/product-overview/notice-on-adjustment-of-service-policies-for-free-certificates?spm=0.2020520163.0.0.eb3b3711whjNcb">阿里云策略</a>改变，目前免费的只有个人测试证书（原免费证书）。</p><p>根据<a href="https://help.aliyun.com/zh/ssl-certificate/user-guide/install-ssl-certificates-on-nginx-servers-or-tengine-servers?spm=a2c4g.11186623.0.0.4c5845b7mFWgir#concept-n45-21x-yfb">Nginx或Tengine服务器配置SSL证书</a>来进行配置。
其中，将下载的证书相关文件解压缩到<code>/etc/nginx/</code>中，</p><h3 id=53-修改nginx配置>5.3 修改nginx配置<a hidden class=anchor aria-hidden=true href=#53-修改nginx配置>#</a></h3><p>同样地，在default文件中，结合了本文提到的两个博客，增加以下内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>server {
</span></span><span class=line><span class=cl>        listen 443 ssl;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        server_name www.fireflyyh.top;
</span></span><span class=line><span class=cl>        root /home/firefly/Codes/blog/public;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        ssl_certificate /etc/nginx/fireflyyh.top.pem;
</span></span><span class=line><span class=cl>        ssl_certificate_key /etc/nginx/fireflyyh.top.key;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        ssl_session_cache shared:SSL:1m;
</span></span><span class=line><span class=cl>        ssl_session_timeout 5m;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        #自定义设置使用的TLS协议的类型以及加密套件（以下为配置示例，请您自行评估是否需要配置）
</span></span><span class=line><span class=cl>        #TLS协议版本越高，HTTPS通信的安全性越高，但是相较于低版本TLS协议，高版本TLS协议对浏览器的兼容性较差。
</span></span><span class=line><span class=cl>        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
</span></span><span class=line><span class=cl>        ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        #表示优先使用服务端加密套件。默认开启
</span></span><span class=line><span class=cl>        ssl_prefer_server_ciphers on;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        error_page 404 /404.html;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        location = /404.html {
</span></span><span class=line><span class=cl>             root /home/firefly/Codes/blog/public;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://fireflyyh.top/tags/blog/>BLOG</a></li></ul><nav class=paginav><a class=prev href=https://fireflyyh.top/posts/tlpi/t_sigaltstack/><span class=title>« Prev</span><br><span>在备选栈中处理信号</span>
</a><a class=next href=https://fireflyyh.top/posts/tlpi/sigmask_longjmp/><span class=title>Next »</span><br><span>在信号处理器函数中执行非本地跳转</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://fireflyyh.top/>Jagger's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function i(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),i();return}const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),i()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),a.setAttribute("class","mac bb1"),r.setAttribute("class","mac bb2"),c.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(n),s.appendChild(t)):s.parentNode.firstChild==s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(s.appendChild(n),e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t)):(s.appendChild(n),e.parentNode.appendChild(t)))})</script></body></html>